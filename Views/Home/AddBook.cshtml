@{
    ViewData["Title"] = "Add Books to the Catalog";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<div class="container-fluid">
    <div class="bg-dark py-5">
        <div class="container px-4 px-lg-5 my-5">
            <div class="text-center text-white">
                <h1 class="display-4 fw-bolder">Add Book</h1>
                <p class="lead fw-normal text-white-50 mb-0">Fill out the form to add a new book to the library.</p>
            </div>
        </div>
    </div>
    <div class="row mt-3">
        <div class="col-8 mx-auto">
            @using (Html.BeginForm("AddBook", "Home", FormMethod.Post))
            {
                <div class="form-group">
                    <label for="titleinput">Title</label>
                    <input type="text" class="form-control" id="titleinput" name="Title" placeholder="Title"
                    maxlength="2000" required>
                    <small id="titleHelp" class="form-text text-muted">Include the title and subtitle here.</small>
                </div>
                <div class="form-group">
                    <label for="authorinput">Author Name</label>
                    <input type="text" class="form-control" id="authorinput" name="Author" placeholder="Aubie Tiger"
                    maxlength="2000" required>
                </div>
                <div class="form-group">
                    <label for="isbninput">ISBN Number</label>
                    <input type="text" class="form-control" id="isbninput" name="ISBN" placeholder="000-0-00-000000-0"
                    maxlength="17" required>
                </div>
                <button id="submit" type="submit" class="mt-3 btn btn-primary">Submit</button>
            }
        </div>
    </div>
</div>

@section Scripts{
<script>
    document.getElementById('isbninput').addEventListener('input', (e) => {
        const x = e.target.value.replace(/\D/g, '').match(/(\d{0,3})(\d{0,1})(\d{0,2})(\d{0,6})(\d{0,1})/);
        e.target.value = !x[2] ? x[1] : x[1] + '-' + x[2] + (x[3] ? '-' + x[3] : '') + (x[4] ? '-' + x[4] : '') + (x[5] ? '-' + x[5] : '');
        if (e.target.value.length === 17) {
            e.target.nextElementSibling.innerHTML = "";
        };
    });
</script>
}